<html>
<head>
	<meta charset='utf-8'>
	<script src='js/promise.js'></script>
	<script src='js/require.js'></script>
	<script>
	window.onload = function(){
		var scene_dir = 'js/scene/'
		require([
			'js/data.js',
			'js/template.js',
			'js/api.js',
			'js/audio.js',
			'js/table.js',
			'js/img.js',
			'js/scene.js',
			'js/compo.js',
			scene_dir + 'login.js', 
			scene_dir + 'lobby_choose.js', scene_dir + 'lobby_make.js', 
			scene_dir + 'game_battle.js', 
			scene_dir + 'game_chara_open.js', 
			scene_dir + 'game_chooseNumber_audience.js', 
			scene_dir + 'game_chooseNumber_performer.js', 
			scene_dir + 'game_damage.js', 
			scene_dir + 'game_encountDragon.js', 
			scene_dir + 'game_result.js', 
			scene_dir + 'game_waituser_audience.js', 
			scene_dir + 'game_waituser_performer.js', 
			scene_dir + 'game_whodoneit_audience.js', 
			scene_dir + 'game_whodoneit_performer.js', 
			], function(){
			var imgs = [
			  'img/oukan.png',
			  'img/connect.png',
			  'img/背景/lightning.jpg',
			  'img/背景/title_bg.png',
			  'img/背景/title_form.png',
			  'img/背景/title_form2.png',
			  'img/背景/lobby/lt2.jpg',
			  'img/背景/lobby/makeroom.gif',
			  'img/背景/lobby/makeroomom.gif',
			  'img/背景/lobby/random.gif',
			  'img/背景/lobby/randomom.gif',
			  'img/背景/lobby/room.gif',
			  'img/背景/lobby/roomom.gif',
			  'img/背景/lobby/frame.png',
			  'img/背景/lobby/ok.gif',
			  'img/背景/lobby/cancel.gif',
			]
			for (var i = -1; i <= 6; i++){
				imgs.push('img/手/' + i + '.png')
			} 

			for (var i = 0; i < TABLE.DRAGON_NAME.length; i++){
				imgs.push('img/ドラゴン画像/d_'+TABLE.DRAGON_NAME[i]+'.png')
			}
			for (var i = 0; i < TABLE.DRAGON_NAME.length; i++){
				imgs.push('img/カード画像/'+TABLE.DRAGON_NAME[i]+'.png')
			}
			audios = [
				"se/決定音候補/se_maoudamashii_system40.mp3",
				"se/キャンセル/se_maoudamashii_system19.mp3",
				"bgm/BGM候補/game_maoudamashii_5_castle04.mp3",
				"se/ゲーム開始音/se_maoudamashii_system49.mp3",
			]
			Promise.all([
				img.load(imgs),
				audio.load(audios)
			])
			.then(function(){
				main();
				Scene.change('login');
			})
			.catch(function(e){
				console.log(e)
			})
		})
	}
	function main(){
		var ctx = document.getElementById('c').getContext('2d');
		Scene.draw(ctx);
		Scene.step();
		setTimeout(main, 20);
	}
	</script>
</head>
<body>
	<canvas id='c' width='640' height='480' style='position:absolute;left:100px;top:100px;'>
	魔王魂
</body>